{"version":3,"sources":["Modal/Modal.module.css","Button/Button.module.css","ImageGallery/ImageGallery.module.css","Container/Container.module.css","Searchbar/Searchbar.js","apiService.js","Button/Button.js","ImageGalleryItem/ImageGalleryItem.js","ImageGallery/ImageGallery.js","Modal/Modal.js","Loader/Loader.js","Container/Container.js","App.js","index.js","Searchbar/Searchbar.module.css"],"names":["module","exports","SearchForm","state","query","handleChange","e","setState","currentTarget","value","handleSubmit","preventDefault","props","onSubmit","className","styles","Searchbar","this","type","SearchFormButton","SearchFormBtnLabel","SearchFormInput","onChange","autocomplete","autofocus","placeholder","Component","axios","defaults","baseURL","searchQuery","page","per_page","get","then","response","data","hits","Button","onClick","text","ImageGalleryItem","webformatURL","tags","largeImageURL","src","alt","ImageGallery","images","onImgClick","map","id","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","target","console","log","window","addEventListener","removeEventListener","createPortal","Overlay","children","Load","color","height","width","timeout","Container","App","isLoading","error","showModal","largeImage","tag","onChangeQuery","nodeName","dataset","toggleModal","fetchImages","options","apiService","catch","finally","onClickBtnLoadMore","prevState","scrollTo","top","documentElement","scrollHeight","behavior","prevProps","alert","Loader","length","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.faa354b5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2zOCu\",\"Modal\":\"Modal_Modal__g3XV6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3qmIP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__g1S47\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__oDpOJ\"};","import { Component } from 'react';\nimport styles from './Searchbar.module.css';\n\nclass SearchForm extends Component {\n  state = {\n    query: '',\n  };\n\n  handleChange = e => {\n    this.setState({ query: e.currentTarget.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    // console.log(this.state);\n    this.props.onSubmit(this.state.query);\n    this.setState({ query: '' });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormBtnLabel}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            value={this.state.query}\n            onChange={this.handleChange}\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default SearchForm;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst API_KEY = '21265855-20ad9644639ddbc8948511dcb';\n\nconst fetchImages = ({ searchQuery = '', page = 1, per_page = 12 }) =>\n  axios\n    .get(\n      `?key=${API_KEY}&q=${searchQuery}&image_type=photo&per_page=${per_page}&page=${page}`,\n    )\n    .then(response => response.data.hits);\n\nexport default { fetchImages };\n","import styles from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nconst Button = ({ onClick, text }) => (\n  <button type=\"button\" onClick={onClick} className={styles.Button}>\n    {text}\n  </button>\n);\n\nButton.propTypes = {\n  text: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n\n// window.scrollTo({\n//   top: document.documentElement.scrollHeight,\n//   behavior: 'smooth',\n// });\n","import styles from './ImageGalleryItem.nodule.css';\nimport PropTypes from 'prop-types';\n\nconst ImageGalleryItem = ({ webformatURL, tags, largeImageURL }) => (\n  <li className={styles.ImageGalleryItem}>\n    <img\n      src={webformatURL}\n      alt={tags}\n      data-src={largeImageURL}\n      className=\"ImageGalleryItemImage\"\n    />\n  </li>\n);\nImageGalleryItem.propTypes = {\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n};\nexport default ImageGalleryItem;\n","import ImageGalleryItem from '../ImageGalleryItem';\nimport styles from './ImageGallery.module.css';\nimport PropTypes from 'prop-types';\n\nconst ImageGallery = ({ images, onImgClick }) => (\n  <ul className={styles.ImageGallery} onClick={onImgClick}>\n    {images.map(({ id, webformatURL, tags, largeImageURL }) => (\n      <ImageGalleryItem\n        key={id}\n        webformatURL={webformatURL}\n        tags={tags}\n        largeImageURL={largeImageURL}\n      />\n    ))}\n  </ul>\n);\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape).isRequired,\n  onImgClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends Component {\n  componentDidMount() {\n    console.log('Modal componentDidMount');\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    console.log('Modal componentWillUnmount');\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    // console.log(e.code);\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={styles.Overlay} onClick={this.handleBackdropClick}>\n        <div className={styles.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","import Loader from 'react-loader-spinner';\n\nconst Load = () => (\n  <Loader type=\"Puff\" color=\"#00BFFF\" height={100} width={100} timeout={3000} />\n);\n\nexport default Load;\n","import PropTypes from 'prop-types';\nimport styles from './Container.module.css';\n\nconst Container = ({ children }) => (\n  <div className={styles.Container}>{children}</div>\n);\n\nContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default Container;\n","import { Component } from 'react';\nimport SearchForm from './Searchbar/Searchbar';\nimport apiService from './apiService';\nimport Button from './Button';\nimport ImageGallery from './ImageGallery';\nimport Modal from './Modal/';\nimport Loader from './Loader';\nimport Container from './Container';\n\nclass App extends Component {\n  state = {\n    images: [],\n    page: 1,\n    searchQuery: '',\n    isLoading: false,\n    error: null,\n    showModal: false,\n    largeImage: '',\n    tag: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.searchQuery !== this.state.searchQuery) {\n      this.fetchImages();\n    }\n  }\n\n  onChangeQuery = query => {\n    this.setState({\n      searchQuery: query,\n      page: 1,\n      images: [],\n      error: null,\n    });\n  };\n\n  onImgClick = e => {\n    if (e.target.nodeName !== 'IMG') {\n      return;\n    }\n\n    const tag = e.target.alt;\n    this.setState({\n      largeImage: e.target.dataset.src,\n      tag,\n    });\n    this.toggleModal();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  fetchImages = () => {\n    const { page, searchQuery } = this.state;\n    const options = {\n      page,\n      searchQuery,\n    };\n\n    this.setState({ isLoading: true });\n\n    apiService\n      .fetchImages(options)\n      .then(hits => this.setState({ images: hits }))\n\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  onClickBtnLoadMore = () => {\n    const { page, searchQuery } = this.state;\n    const options = {\n      page,\n      searchQuery,\n    };\n\n    this.setState({ isLoading: true });\n\n    apiService\n      .fetchImages(options)\n      .then(hits => {\n        this.setState(prevState => ({\n          images: [...prevState.images, ...hits],\n          page: prevState.page + 1,\n        }));\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => {\n        this.setState({ isLoading: false });\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      });\n  };\n\n  render() {\n    const { images, isLoading, error, showModal, largeImage, tag } = this.state;\n    return (\n      <Container>\n        {showModal && (\n          <Modal onClose={this.toggleModal} onImgClick={this.onImgClick}>\n            <img src={largeImage} alt={tag} />\n          </Modal>\n        )}\n\n        {error && alert('Error, try again later!')}\n\n        <SearchForm onSubmit={this.onChangeQuery} />\n\n        {isLoading && <Loader />}\n\n        <ImageGallery images={images} onImgClick={this.onImgClick} />\n\n        {images.length > 0 && !isLoading && (\n          <Button text={'Load more'} onClick={this.onClickBtnLoadMore} />\n        )}\n      </Container>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// key : 21265855-20ad9644639ddbc8948511dcb\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar___aaGz\",\"SearchForm\":\"Searchbar_SearchForm__2ZYln\",\"SearchFormButton\":\"Searchbar_SearchFormButton__3xSKN\",\"SearchFormBtnLabel\":\"Searchbar_SearchFormBtnLabel__1TwdU\",\"SearchFormInput\":\"Searchbar_SearchFormInput__1CufA\"};"],"sourceRoot":""}